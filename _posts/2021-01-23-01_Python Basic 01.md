---
layout: post
title: Python查漏补缺
date: 2021-01-12
author: Zhiliang 
tags: [Machine Learning,Python,Basic]
toc: true
mathjax: true
---

Python是一种面向对象的、动态的程序设计语言，具有非常简洁而清晰的语法，既可以用于快速开发程序脚本，也可以用于开发大规模的软件，特别适合于完成各种高层任务。

<!-- more -->

> 之后需要学习的：
>
> - [Python标准库](https://docs.python.org/zh-cn/3.6/library/index.html#library-index)：有关标准的对象和模块
> - [Python语言参考](https://docs.python.org/zh-cn/3.6/reference/index.html#reference-index)：提供了更正式的语言定义
> - [扩展和嵌入 Python 解释器](https://docs.python.org/zh-cn/3.6/extending/index.html#extending-index)、[Python/C API 参考手册](https://docs.python.org/zh-cn/3.6/c-api/index.html#c-api-index)：要写 C 或者 C++ 扩展

# 解释器

- 在主提示符中输入文件结束字符（在 Unix 系统中是 Control-D，Windows 系统中是 Control-Z）就退出解释器并返回退出状态为0。如果这样不管用，你还可以写这个命令退出：`quit()`。
- 要确定解释器是否支持命令行编辑，最快的方法可能是在第一个Python提示符中输入Control-P。如果它响了，你有命令行编辑；如果什么都没有发生，或者返回^P，命令行编辑是不可用的，您只能使用退格键从当前行删除字符。
- 另一种启动解释器的方式是 `python -c command [arg] ...`，其中 *command* 要换成想执行的指令，就像命令行的 [`-c`](https://docs.python.org/zh-cn/3.6/using/cmdline.html#cmdoption-c) 选项。由于 Python 代码中经常会包含对终端来说比较特殊的字符，通常情况下都建议用英文单引号把 *command* 括起来。例子：`python -c print('456')`
- Python 模块也可以作为脚本使用。可以这样输入：`python -m module [arg] ...`，这会执行 *module* 的源文件，就跟你在命令行把路径写全了一样。

## 调用解释器

### 传入参数

解释器会读取命令行参数，转化为字符串列表存入 `sys` 模块中的 `argv` 变量中。执行命令 `import sys` 你可以导入这个模块并访问这个列表。这个列表最少也会有一个元素；如果没有给定输入参数，`sys.argv[0]` 就是个空字符串。<u>例子：</u>`python test.py arg1 arg2 arg3`

如果脚本名是 `'-'``（标准输入）时，``sys.argv[0]` 就是 `'-'`。

使用 [`-c`](https://docs.python.org/zh-cn/3.6/using/cmdline.html#cmdoption-c) *命令* 时，`sys.argv[0]` 就会是 `'-c'`。

如果使用选项 [`-m`](https://docs.python.org/zh-cn/3.6/using/cmdline.html#cmdoption-m) *module*，`sys.argv[0]` 就是包含目录的模块全名。

> 在 [`-c`](https://docs.python.org/zh-cn/3.6/using/cmdline.html#cmdoption-c) *command* 或 [`-m`](https://docs.python.org/zh-cn/3.6/using/cmdline.html#cmdoption-m) *module* 之后的选项不会被解释器处理，而会直接留在 `sys.argv` 中给命令或模块来处理。

### 交互模型

交互模式中，会显示 *主提示符（primary prompt）*，提示输入下一条指令，通常用三个大于号（`>>>`）表示；连续输入行的时候，它会显示 *次要提示符*，默认是三个点（`...`）。

## 解释器的运行环境

默认情况下，Python 源码文件以 UTF-8 编码方式处理。

如果不使用默认编码，要声明文件所使用的编码，文件的 *第一* 行要写成特殊的注释。语法如下所示：

```python
# -*- coding: encoding -*-
```

其中 *encoding* 可以是 Python 支持的任意一种 [`codecs`](https://docs.python.org/zh-cn/3.6/library/codecs.html#module-codecs)。

关于 *第一行* 规则的一种例外情况是，源码以 [UNIX “shebang” 行](https://docs.python.org/zh-cn/3.6/tutorial/appendix.html#tut-scripts) 开头。这种情况下，编码声明就要写在文件的第二行。例如：

```python
#!/usr/bin/env python3
# -*- coding: cp1252 -*-
```

> 1. 在Unix系统中，Python 3.x解释器默认安装后的执行文件并不叫作 `python`，这样才不会与同时安装的Python 2.x冲突。

# Python 的非正式介绍

## Python 作为计算器使用

### 数字

解释器就像一个简单的计算器一样：你可以在里面输入一个表达式然后它会写出答案。 表达式的语法很直接：运算符 `+`、`-`、`*`、`/` 的用法和其他大部分语言一样；括号 (`()`) 用来分组。

除法运算 (`/`) 永远返回浮点数类型。**如果要做 [floor division](https://docs.python.org/zh-cn/3.6/glossary.html#term-floor-division) 得到一个整数结果（忽略小数部分）你可以使用 `//` 运算符**；如果要计算余数，可以使用 `%`

使用 `**` 运算符来计算乘方

多种混合类型运算数的运算会把整数转换为浮点数

在交互模式下，<u>上一次打印出来的表达式被赋值给变量 `_`。</u>这意味着当你把Python用作桌面计算器时，继续计算会相对简单

```python
>>> tax = 12.5 / 100
>>> price = 100.50
>>> price * tax
12.5625
>>> price + _
113.0625
```

除了 [`int`](https://docs.python.org/zh-cn/3.6/library/functions.html#int) 和 [`float`](https://docs.python.org/zh-cn/3.6/library/functions.html#float)，Python也支持其他类型的数字，例如 [`Decimal`](https://docs.python.org/zh-cn/3.6/library/decimal.html#decimal.Decimal) 或者 [`Fraction`](https://docs.python.org/zh-cn/3.6/library/fractions.html#fractions.Fraction)。Python 也内置对 [复数](https://docs.python.org/zh-cn/3.6/library/stdtypes.html#typesnumeric) 的支持，使用后缀 `j` 或者 `J` 就可以表示虚数部分（例如 `3+5j` ）。

### 字符串

如果不希望前置了 `\` 的字符转义成特殊字符，可以使用 *原始字符串* 方式，在引号前添加 `r` 即可

```python
>>> print(r'C:\some\name')  # note the r before the quote
C:\some\name
```

字符串字面值可以跨行连续输入。一种方式是用三重引号：`"""..."""` 或 `'''...'''`。字符串中的回车换行会自动包含到字符串中，如果不想包含，在行尾添加一个 `\` 即可。



字符串可以用 `+` 进行连接（粘到一起），也可以用 `*` 进行重复；相邻的两个或多个 *字符串字面值* （引号引起来的字符）将会自动连接到一起（变量或表达式不行）；字符串是可以被 *索引* （下标访问），索引也可以用负数，这种会从右边开始数；字符串还支持 *切片*

> Python 中的字符串不能被修改，它们是 [immutable](https://docs.python.org/zh-cn/3.6/glossary.html#term-immutable) 的。
>
> > immutable – 不可变
> >
> > 具有固定值的对象。不可变对象包括**数字、字符串和元组**。这样的对象不能被改变。如果必须存储一个不同的值，则必须创建新的对象。它们在需要常量哈希值的地方起着重要作用，例如作为字典中的键。

